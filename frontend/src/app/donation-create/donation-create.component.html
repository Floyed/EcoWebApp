<div class="container">
    <h1>Donate</h1>
    <form #donationForm="ngForm" (ngSubmit)="saveDonation(donationForm)">
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name"
                   required
                   [(ngModel)]="donation.name" name="name"
                   #name="ngModel">
            <div [hidden]="name.valid || name.pristine"
                 class="alert alert-danger">
                Name is required
            </div>
        </div>
        <div class="form-group">
            <label for="emailId">Email</label>
            <input type="email" class="form-control" id="emailId"
                   required
                   [(ngModel)]="donation.emailId" name="emailId" [value]="donation.emailId"
                   readonly
                   #emailId="ngModel">
            <div [hidden]="emailId.valid || emailId.pristine"
                 class="alert alert-danger">
                Email Id is required
            </div>
        </div>
        <div class="form-group">
            <label for="amount">Amount</label>
            <input type="number" class="form-control" id="amount"
                   [(ngModel)]="donation.amount" name="amount"
                   customMin="1"
                   #amount="ngModel">
            <div [hidden]="amount.valid || amount.pristine"
                 class="alert alert-danger">
                Amount is required and should not be 0
            </div>
        </div>
        <button
                angular-rave
                [PBFPubKey]="'FLWPUBK_TEST-15175d68b5f7a725f15d52f5c1d5316e-X'"
                [customer_email]="donation.emailId"
                [custom_title]="'Thank you ' + donation.name"
                [amount]="donation.amount"
                [txref]="donation.emailId + donation.amount"
                [currency]="'USD'"
                [autoClose]="true"
                (callback)="paymentSuccess($event)"
                (close)="paymentFailure()"
                class="btn btn-success" [disabled]="!donationForm.form.valid">Donate ${{donation.amount}}</button>
    </form>
</div>
